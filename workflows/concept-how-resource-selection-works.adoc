---
permalink: workflows/concept-how-resource-selection-works.html 
sidebar: sidebar 
keywords: oncommand, workflow, automation, use, search, algorithms, select, storage, resource, execution, understand, order, design, efficiently 
summary: OnCommand Workflow Automation （ WFA ）では、検索アルゴリズムを使用して、ワークフローの実行に使用するストレージリソースを選択します。ワークフローを効率的に設計するには、リソースの選択の仕組みを理解しておく必要があります。 
---
= リソース選択の仕組み
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
OnCommand Workflow Automation （ WFA ）では、検索アルゴリズムを使用して、ワークフローの実行に使用するストレージリソースを選択します。ワークフローを効率的に設計するには、リソースの選択の仕組みを理解しておく必要があります。

WFA では、検索アルゴリズムを使用して、 vFiler ユニット、アグリゲート、仮想マシンなどのディクショナリエントリのリソースが選択されます。選択したリソースを使用してワークフローが実行されます。WFA 検索アルゴリズムは WFA ビルディングブロックの一部であり、ファインダとフィルタが含まれています。必要なリソースを特定して選択するために、検索アルゴリズムでは、 Active IQ Unified Manager 、 VMware vCenter Server 、データベースなど、さまざまなリポジトリからキャッシュされたデータを検索します。デフォルトでは、すべてのディクショナリエントリで、自然キーに基づいてリソースを検索するためのフィルタが使用できます。

ワークフロー内の各コマンドのリソース選択基準を定義する必要があります。また、 Finder を使用して、ワークフローの各行にリソース選択条件を定義することもできます。たとえば、特定の量のストレージスペースを必要とするボリュームを作成する場合、「ボリュームの作成」コマンドで「使用可能な容量でアグリゲートを検索」ファインダを使用すると、指定した量の使用可能なスペースを持つアグリゲートを選択してボリュームを作成できます。

vFiler ユニット、アグリゲート、仮想マシンなど、ディクショナリエントリリソース用のフィルタルールのセットを定義できます。フィルタルールには、 1 つ以上のルールグループを含めることができます。ルールは、ディクショナリエントリ属性、演算子、および値で構成されます。属性には、その参照の属性も含めることができます。たとえば、次のようにアグリゲートのルールを指定できます。 List all aggregates that have names starting with the string "aggr>" and have more than 5GB available spac確保 。グループの最初のルールは属性 "`name`" で、演算子 "`starts-name", および値 "aggr`") です。同じグループの 2 番目の規則は ' 属性 "available_size_MB`" で ' 演算子 "`>`" と値 "5000`" です一連のフィルタルールとパブリックフィルタを定義できます。Finder を選択した場合は、「フィルタルールを定義」オプションが無効になります。フィルタルールを定義（ Define filter rules ）チェックボックスを選択した場合、 Finder として保存（ Save As Finder ）オプションは無効になります。

フィルタやファインダのほかに、検索コマンドや定義コマンドを使用して、使用可能なリソースを検索することもできます。検索コマンドまたは定義コマンドは、 No-op コマンドよりも推奨されます。検索および定義コマンドを使用して、証明済みディクショナリエントリタイプとカスタムディクショナリエントリタイプの両方のリソースを定義できます。検索コマンドまたは定義コマンドではリソースが検索されますが、リソースに対する操作は実行されません。ただし、リソースの検索に Finder を使用する場合は、コマンドのコンテキストで Finder を使用し、コマンドで定義されたアクションがリソースに対して実行されます。検索コマンドまたは定義コマンドによって返されるリソースは、ワークフロー内の他のコマンドの変数として使用されます。

次の図は、リソースの選択にフィルタが使用されていることを示しています。

image::../media/resource_selection_5_x.png[リソースの選択 5 x]



== 定義済みワークフローでのリソース選択の例

Designer で次の定義済みワークフローのコマンドの詳細を開き、リソース選択オプションの使用方法を理解できます。

* clustered Data ONTAP の NFS ボリュームを作成
* クラスタピアリングを確立する
* clustered Data ONTAP ボリュームを削除

